<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <title>Media Player</title>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" href="../html/bootstrap-4.3.1-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../html/fontawesome-free-5.9.0-web/css/all.min.css">
    <link rel="stylesheet" href="css/blue.monday/css/jplayer.blue.monday.min.css">
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <div class="container-fluid">
        <div class="row main">
            <div class="col-2 main_menu">
                <div class="logo">
                    <img src="images/LOGO.svg" alt="logo">
                    <span class="logo_title title">Music Box</span>
                </div>
                <div class="scroll">
                    <ul class="menu home">
                        <li><img src="images/home.svg" alt="">Home</li>
                        <li><img src="images/discover.svg" alt="">Discover</li>
                        <li><img src="images/radio.svg" alt="">Radio</li>
                    </ul>
                    <div class="music_library_title list_title title">Your Music Library</div>
                    <ul class="menu music_library">
                        <li>Recently Played</li>
                        <li>Liked Music</li>
                        <li>Albums</li>
                        <li>Singer</li>
                    </ul>
                </div>
                <div class="album_playing"><img src="" alt="album_playing" class="img_responsive"></div>
            </div>
            <div class="col-8 main_block">
                <div class="row">
                    <div class="col-12">
                        <div class="cover">
                            <img src="images/cover.png" alt="cover" class="img_responsive">
                            <div class="search">
                                <input type="search" placeholder="search">
                            </div>
                            <div class="singer title">Taylor Swift</div>
                            <div class="follower">
                                <div class="follow_number">Follower 38,896,322</div>
                                <button class="follow">Follow</button>
                            </div>
                        </div>
                    </div>
                    <div class="w-100"></div>
                    <div class="col-8">
                        <div class="top_song">
                            <div class="top_song_title title">Top Song</div>
                            <ul class="top_song_list scroll" id="top_song_list">
                                <!-- <li>
                                    <span class="album_sm">
                                        <img src="images/album_2.png" alt="album cover">
                                    </span>
                                    <span class="num">1.</span>
                                    <span class="like"></span>
                                    <span class="song_name">song_name</span>
                                    <span class="menu_icon"></span>
                                    <span class="song_time">02:30</span>
                                </li> -->
                            </ul>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="new_album">
                            <div class="new_album_title title">New Album</div>
                            <ul class="ablum scroll">
                                <li>
                                    <div class="album_md">
                                        <img src="images/album_2@2x.png" alt="album cover">
                                    </div>
                                    <div class="album_info">
                                        <div class="album_name">album_name</div>
                                        <div class="album_date">2019</div>
                                    </div>
                                </li>
                                <li>
                                    <div class="album_md">
                                        <img src="images/album_3@2x.png" alt="album cover">
                                    </div>
                                    <div class="album_info">
                                        <div class="album_name">album_name</div>
                                        <div class="album_date">2019</div>
                                    </div>
                                </li>
                                <li>
                                    <div class="album_md">
                                        <img src="images/album_4@2x.png" alt="album cover">
                                    </div>
                                    <div class="album_info">
                                        <div class="album_name">album_name</div>
                                        <div class="album_date">2019</div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-2 music_list">
                <div class="user">
                    <img src="images/head.svg" alt="user">
                    <div class="user_name title">My Name</div>
                </div>
                <div class="music_list_title list_title title">Your Music List</div>
                <ul class="music_list_main list menu scroll">
                    <!-- <li>song_name</li> -->
                </ul>
            </div>
        </div>
        <div class="row player">
            <div class="col-12">
                <div class="jp-jplayer" id="jquery_jplayer_1"></div>
                <div id="jp_container_1" class="jp-audio" role="application" aria-label="media player">
                    <div class="jp-type-playlist">
                        <div class="jp-gui jp-interface">
                            <div class="row">
                                <div class="col-2">
                                    <div class="jp-song-info">
                                        <span class="song_name"></span>
                                        <img src="images/heart.svg" alt="">
                                        <p class="singer"></p>
                                    </div>
                                </div>
                                <div class="col-8">
                                    <div class="jp-controls">
                                        <button class="jp-random" role="button" tabindex="0">
                                            <img src="images/random.svg" alt="">
                                        </button>
                                        <button class="jp-previous" role="button" tabindex="0">
                                            <img src="images/previous.svg" alt="">
                                        </button>
                                        <button class="jp-play" role="button" tabindex="0">
                                            <img src="images/play.svg" alt="" id="jp-play-img">
                                            <img src="images/pause.svg" alt="" id="jp-pause-img" style="display: none;">
                                        </button>
                                        <button class="jp-next" role="button" tabindex="0">
                                            <img src="images/next.svg" alt="">
                                        </button>
                                        <button class="jp-replay" role="button" tabindex="0">
                                            <img src="images/replay.svg" alt="">
                                        </button>
                                        <!-- <button class="jp-stop" role="button" tabindex="0"></button> -->
                                    </div>
                                    <div class="jp-progress">
                                        <div class="jp-seek-bar">
                                            <div class="jp-play-bar"></div>
                                        </div>
                                    </div>
                                    <div class="jp-time-holder">
                                        <div class="jp-current-time" role="timer" aria-label="time">&nbsp;</div>
                                        <div class="jp-duration" role="timer" aria-label="duration">&nbsp;</div>
                                    </div>
                                </div>
                                <div class="col-2">
                                    <div class="jp-volume-controls">
                                        <button class="jp-mute" role="button" tabindex="0">
                                            <img src="images/volume.svg" alt="">
                                        </button>
                                        <!-- <button class="jp-volume-max" role="button" tabindex="0"></button> -->
                                        <div class="jp-volume-bar">
                                            <div class="jp-volume-bar-value"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="jp-playlist">
                            <ul>
                                <li>&nbsp;</li>
                            </ul>
                        </div>
                        <div class="jp-no-solution">
                            <span>Update Required</span>
                            To play the media you will need to either update your browser to a recent version or update your <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- <script src="../html/bootstrap-4.3.1-dist/js/bootstrap.min.js" type="text/javascript"></script> -->
    <script src="../html/js/jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="../html/fontawesome-free-5.9.0-web/js/all.min.js" type="text/javascript"></script>
    <script src="js/jquery.jplayer.min.js"></script>
    <script src="js/jplayer.playlist.min.js"></script>
    <script>
    /////////////////media player
    var cssSelector = {
            jPlayer: "#jquery_jplayer_1",
            cssSelectorAncestor: "#jp_container_1"
        },
        playlist = [{
                title: "Carol of the Bells",
                artist: "Quincas Moreira",
                mp3: "audio/Carol_of_the_Bells.mp3",
                poster: 'images/album_2.png',
                poster_lg: 'images/album_2@2x.png',
                customduration: '01:58'
            },
            {
                title: "Pink Horizon",
                artist: "Chris Haugen",
                mp3: "audio/Pink_Horizon.mp3",
                poster: 'images/album_3.png',
                poster_lg: 'images/album_3@2x.png',
                customduration: '02:24'
            },
            {
                title: "Marigold",
                artist: "Quincas Moreira",
                mp3: "audio/Marigold.mp3",
                poster: 'images/album_4.png',
                poster_lg: 'images/album_4@2x.png',
                customduration: '03:54'
            },
            {
                title: "Psychic Magic",
                artist: "Unicorn Heads",
                mp3: "audio/Psychic_Magic.mp3",
                poster: 'images/album_5.png',
                poster_lg: 'images/album_5@2x.png',
                customduration: '05:22'
            },
            {
                title: "Amazement",
                artist: "Freedom Trail Studio",
                mp3: "audio/Amazement.mp3",
                poster: 'images/album_6.png',
                poster_lg: 'images/album_6@2x.png',
                customduration: '04:00'
            },
            {
                title: "Cliffsides",
                artist: "Dan Lebowitz",
                mp3: "audio/Cliffsides.mp3",
                poster: 'images/album_7.png',
                poster_lg: 'images/album_7@2x.png',
                customduration: '02:08'
            },
            {
                title: "The Black Cat",
                artist: "Aaron Kenny",
                mp3: "audio/The_Black_Cat.mp3",
                poster: 'images/album_8.png',
                poster_lg: 'images/album_8@2x.png',
                customduration: '02:22'
            },{
                title: "Anton",
                artist: "Dan Bodan",
                mp3: "audio/Anton.mp3",
                poster: 'images/album_2.png',
                poster_lg: 'images/album_2@2x.png',
                customduration: '02:40'
            },
            {
                title: "Acoustic Symphony",
                artist: "Hanu Dixit",
                mp3: "audio/Acoustic_Symphony.mp3",
                poster: 'images/album_3.png',
                poster_lg: 'images/album_3@2x.png',
                customduration: '01:56'
            },
            {
                title: "Bellissimo",
                artist: "Doug Maxwell",
                mp3: "audio/Bellissimo.mp3",
                poster: 'images/album_4.png',
                poster_lg: 'images/album_4@2x.png',
                customduration: '01:55'
            }
        ],
        options = {
            swfPath: "js/",
            supplied: "mp3",
            wmode: "window",
            useStateClassSkin: true,
            autoBlur: false,
            smoothPlayBar: true,
            keyEnabled: true,
            remainingDuration: true,
            loopOnPrevious: true,
            shuffleOnLoop: true
        },
        myPlaylist = new jPlayerPlaylist(cssSelector, playlist, options);
    $(document).ready(function() {
        myPlaylist;
    });

    $('.jp-play').on('click', function() {
        if ($('#jquery_jplayer_1').data().jPlayer.status.paused) {
            $(this).find('#jp-play-img').hide();
            $(this).find('#jp-pause-img').show();
        } else {
            $(this).find('#jp-play-img').show();
            $(this).find('#jp-pause-img').hide();
        }
    });
    $('.jp-previous, .jp-next').on('click', function() {
        $('.jp-play').find('#jp-play-img').hide();
        $('.jp-play').find('#jp-pause-img').show();
    });
    $('.jp-random').on('click', function() {
        myPlaylist.shuffle();
    });
    $('.jp-random, .jp-replay').on('click', function() {
        $(this).toggleClass('active');
    });

    /////////////////rander top song
    // $('#top_song_list').html('');
    for (var i = 0; i < playlist.length; i++) {
        var media_list_li = `<li>
                    <span class="album_sm">
                        <img src="${playlist[i].poster}" alt="album cover">
                    </span>
                    <span class="num">${i + 1}. </span>
                    <span class="like"></span>
                    <span class="song_name">${playlist[i].title}</span>
                    <span class="menu_icon"></span>
                   <span class="song_time">${playlist[i].customduration}</span>
               </li>`,
            music_list_li = `<li>${playlist[i].title}</li>`;
        $('#top_song_list').append(media_list_li);
        $('.music_list_main').append(music_list_li);
    };
    $('#top_song_list li').on('click', function() {
        console.log($(this).index());
        var _play_index = $(this).index();
        myPlaylist.play(_play_index);
        $('.jp-play').find('#jp-play-img').hide();
        $('.jp-play').find('#jp-pause-img').show();
    });
    console.log(myPlaylist);

    function playingSongInfo(title, artist, poster) {
        $('#jp_container_1 .jp-song-info .song_name').html(title);
        $('#jp_container_1 .jp-song-info .singer').html(artist);
        $('.album_playing img').attr('src', poster);
    }
    playingSongInfo(playlist[0].title, playlist[0].artist, playlist[0].poster_lg);
    $("#jquery_jplayer_1").bind($.jPlayer.event.play, function(event) {
        // console.log(event);
        var _song = event.jPlayer.status.media,
            _songTitle = _song.title,
            _songArtist = _song.artist,
            _songPoster = _song.poster_lg,
            _listSpan = $('#top_song_list li').find('.song_name:contains(' + _songTitle + ')');
        playingSongInfo(_songTitle, _songArtist, _songPoster);
        $('#top_song_list li').removeClass('active');
        _listSpan.parents('li').addClass('active');
    });

    $("#jquery_jplayer_1").bind($.jPlayer.event.ended, function(event) {
        var _songTitle = event.jPlayer.status.media.title,
            _lastSongIndex = $('#top_song_list li').length - 1,
            _lastSong = $('#top_song_list li').eq(_lastSongIndex).find('.song_name').html();
        if (_songTitle == _lastSong) {
            myPlaylist.play(0);
        }
    });

    ////////////// js style
    function jsHeight() {
        //main height
        var _main_h = $(window).height() - $('#jp_container_1').height();
        $('.main').height(_main_h);

        //main_menu height
        var _menu_scroll = _main_h - $('.main_menu .logo').height() - $('.main_menu .album_playing').height();
        $('.main_menu .scroll').height(_menu_scroll);

        //Top_Song New_Album height
        var _top_song_list_h = _main_h - $('.main_block .cover').height() - $('.main_block .title').height() - 40;
        $('.main_block .top_song_list, .main_block .ablum').height(_top_song_list_h);

        //Music_List height
        var _music_list_h = _main_h - $('.music_list .user').height() - 50 - $('.music_list .title').height();
        $('.music_list .music_list_main').height(_music_list_h);

        //volume_bar width
        var _volume_w = $('.jp-volume-controls').width() - $('.jp-volume-controls .jp-mute').width() - 30;
        $('.jp-volume-controls .jp-volume-bar').width(_volume_w);
    }
    jsHeight();
    $(window).resize(jsHeight);
    </script>
</body>

</html>